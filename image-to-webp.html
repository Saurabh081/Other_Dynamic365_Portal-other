<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Convert image to Webp</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 30px;
    }

    h1 {
      margin-bottom: 20px;
    }

    input[type="file"] {
      display: none;
    }

    label.upload-btn {
      display: inline-block;
      padding: 15px 30px;
      background-color: #ccc;
      color: #000;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
    }

    .images-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-top: 30px;
    }

    .image-block {
      text-align: center;
    }

    .image-block img {
      width: 300px;
      height: auto;
      border: 1px solid #ddd;
      border-radius: 5px;
    }

    .image-block h3 {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <h1>Convert image to Webp format</h1>

  <label for="fileInput" class="upload-btn">Upload an Image</label>
  <input type="file" accept="image/*" id="fileInput" onchange="convertImage(event)">

  <div class="images-container">
    <div class="image-block">
      <h3>Original Image</h3>
      <img id="Uimage" src="" alt="Original Image">
    </div>
    <div class="image-block">
      <h3>Webp Image</h3>
      <img id="Wimage" src="" alt="WebP Image">
    </div>
  </div>

  <script>
    const Uimage = document.querySelector("#Uimage");
    const Wimage = document.querySelector("#Wimage");

    function convertImage(event) {
      if (event.target.files.length > 0) {
        // shows the User Image
        let src = URL.createObjectURL(event.target.files[0]);
        Uimage.src = src;

        // Convert User Image to Canvas
        let canvas = document.createElement('canvas');
        let ctx = canvas.getContext("2d");

        let userImage = new Image();
        userImage.src = src;

        userImage.onload = function () {
          canvas.width = userImage.width;
          canvas.height = userImage.height;
          ctx.drawImage(userImage, 0, 0);

          // convert canvas to webp
          let webpImage = canvas.toDataURL("image/webp", 0.5);
          Wimage.src = webpImage;
        };
      }
    }
  </script>

</body>
</html>
